{"filter":false,"title":"getPlayerStats.php","tooltip":"/getPlayerStats.php","undoManager":{"mark":41,"position":41,"stack":[[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"insert","lines":["<"],"id":1}],[{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"insert","lines":["?"],"id":2}],[{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"insert","lines":["p"],"id":3}],[{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"insert","lines":["h"],"id":4}],[{"start":{"row":0,"column":4},"end":{"row":0,"column":5},"action":"insert","lines":["p"],"id":5}],[{"start":{"row":0,"column":5},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":6}],[{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"insert","lines":["",""],"id":7}],[{"start":{"row":2,"column":0},"end":{"row":3,"column":0},"action":"insert","lines":["",""],"id":8}],[{"start":{"row":3,"column":0},"end":{"row":3,"column":1},"action":"insert","lines":["?"],"id":9}],[{"start":{"row":3,"column":1},"end":{"row":3,"column":2},"action":"insert","lines":[">"],"id":10}],[{"start":{"row":1,"column":0},"end":{"row":139,"column":41},"action":"insert","lines":["$jew = \"jeewwbacca\";"," $tim = \"tanky_tim12\";"," $wheels = \"wheels00769\";"," $cosmic = \"cosmicrichy\";"," $hunter = 0;"," $titan = 1;"," $warlock = 2;"," "," $selectedCharacter = 2;"," "," $psn = 2;"," $xbox = 3;"," "," if($selectedCharacter == 0)"," {","  $activeCharacter = \"Hunter\";"," }"," elseif($selectedCharacter == 1)"," {","  $activeCharacter=\"Titan\";"," }"," else","  $activeCharacter = \"Warlock\";",""," $apiKey = 'b7139c21a2114d17b538c7a53ceff70d';"," ","// $membershipID = 4611686018439307322;"," ","//  curl_setopt($ch, CURLOPT_URL, 'https://www.bungie.net/platform/Destiny/Manifest/InventoryItem/1274330687/');","","//get memberships (test)>","// /SearchDestinyPlayer/{membershipType}/{displayName}/","","//1. get membershipID and search by given username"," $getMembershipId = curl_init();"," //curl_setopt($getMembershipId, CURLOPT_URL, 'https://www.bungie.net/Platform/Destiny/2/Stats/GetMembershipIdByDisplayName/'.$wheels.'/');"," "," //case insensitive PSN name search- THIS SPITS OUT AN ARRAY"," curl_setopt($getMembershipId, CURLOPT_URL, 'https://www.bungie.net/Platform/Destiny/SearchDestinyPlayer/'.$psn.'/'.$jew.'/');"," curl_setopt($getMembershipId, CURLOPT_RETURNTRANSFER, true);"," curl_setopt($getMembershipId, CURLOPT_HTTPHEADER, array('X-API-Key: ' . $apiKey));"," $getMembershipResults = curl_exec($getMembershipId);"," $getMembershipResponse = json_decode($getMembershipResults);"," "," //"," $membershipID = $getMembershipResponse->Response[0]->membershipId;"," $displayName = $getMembershipResponse->Response[0]->displayName;;"," echo \"case insensitive test: \", $getMembershipResults;"," "," echo \"First membership ID: \", $membershipID;"," "," //Aggregate Stats"," // /Stats/AggregateActivityStats/{membershipType}/{destinyMembershipId}/{characterId}/"," "," //2. get Account Summary- Jeewwbacca"," $ch = curl_init();"," curl_setopt($ch, CURLOPT_URL, 'https://www.bungie.net/Platform/Destiny/2/Account/'.$membershipID.'/Summary/');"," curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);"," curl_setopt($ch, CURLOPT_HTTPHEADER, array('X-API-Key: ' . $apiKey));"," $result = curl_exec($ch);"," $json = json_decode($result);"," "," // $membershipID = $json->Response;"," $characterId = $json->Response->data->characters[$selectedCharacter]->characterBase->characterId;"," $lightLevel = $json->Response->data->characters[$selectedCharacter]->characterBase->powerLevel;"," $grimoire = $json->Response->data->characters[$selectedCharacter]->characterBase->grimoireScore;"," "," echo \"<p>User DisplayName: \", $displayName;"," echo \"<p>Membership ID: \", $membershipID;"," echo \"<P>Character ID: \", $characterId;"," echo \"<p>Character: \", $activeCharacter;"," echo \"<p>Light Level: \", $lightLevel;"," echo \"<p>Grimoire: \", $grimoire;"," $bungieURL = \"https://bungie.net\";"," // $urlMissing2 = \"https://bungie.net\";"," "," $emblemPath = $json->Response->data->characters[$selectedCharacter]->emblemPath;"," $emblemBackgroundPath = $json->Response->data->characters[$selectedCharacter]->backgroundPath;"," "," // echo \"<p>emblem: \", $emblemPath;"," // echo \"<p>background: \", $emblemBackgroundPath;"," "," $completeEmblemIcon = \"$bungieURL$emblemPath\";"," $completeEmblemBackground = \"$bungieURL$emblemBackgroundPath\";"," "," // echo \"<p>emblem: \", $completeEmblemIcon;"," // echo \"<p>background: \", $completeEmblemBackground;"," "," // $grimoire = $json->Response->data->characters[$hunter]->characterBase->grimoireScore;"," "," // echo \"Hunter Emblem Icon Link: \", $completeEmblemIcon;"," // echo \"<p> Emblem Background Path: \", $completeEmblemBackground;"," // echo \"<p> Hunter Grimoire is: \", $grimoire;"," "," "," "," //TESTING BELOW- Trials stats"," $accountSummary = curl_init();"," // curl_setopt($accountSummary, CURLOPT_URL, 'https://www.bungie.net/Platform/Destiny/2/Account/'.$membershipID.'/Summary/');"," // curl_setopt($accountSummary, CURLOPT_URL, 'https://www.bungie.net/Platform/Destiny/Stats/ActivityHistory/2/'.$membershipID.'/'.$characterId.'/?mode=TrialsOfOsiris');"," // curl_setopt($accountSummary, CURLOPT_URL, 'https://www.bungie.net/Platform/Destiny/Stats/AggregateActivityStats/2/'.$membershipID.'/'.$characterId.'/?defintions=true');"," // curl_setopt($accountSummary, CURLOPT_URL, 'https://www.bungie.net/Platform/Destiny/Stats/Definition/');"," // curl_setopt($accountSummary, CURLOPT_URL, 'https://www.bungie.net/Platform/Destiny/2/Account/'.$membershipID.'/Triumphs/');"," "," //ALL TIME STATS HERE"," curl_setopt($accountSummary, CURLOPT_URL, 'https://www.bungie.net/Platform/Destiny/Stats/2/'.$membershipID.'/'.$characterId.'/?modes=TrialsOfOsiris');","","","","","",""," // curl_setopt($accountSummary, CURLOPT_URL, 'https://www.bungie.net/Platform/Destiny/Stats/AggregateActivityStats/2/'.$membershipID.'/'.$characterId.'/');"," // www.bungie.net/Platform/Destiny/Stats/ActivityHistory/{membershipType}/{destinyMembershipId}/{characterId}/"," curl_setopt($accountSummary, CURLOPT_RETURNTRANSFER, true);"," curl_setopt($accountSummary, CURLOPT_HTTPHEADER, array('X-API-Key: ' . $apiKey));"," $getAccountSummary = curl_exec($accountSummary);"," $json2 = json_decode($getAccountSummary);"," "," //Get Warlock Light Level "," //echo \"<p>Light Level: \", $json2->Response->data->characters[$hunter]->characterBase->powerLevel;//->characterBase->minutesPlayedTotal;"," "," "," $trialsKDRatio = $json2->Response->trialsOfOsiris->allTime->killsDeathsRatio->basic->displayValue;"," $trialsTotalKills = $json2->Response->trialsOfOsiris->allTime->kills->basic->displayValue;"," $trialsAverageKillsPerGame = $json2->Response->trialsOfOsiris->allTime->kills->pga->displayValue;"," $trialsTotalDeaths = $json2->Response->trialsOfOsiris->allTime->deaths->basic->displayValue;"," $trialsAverageDeathsPerGame = $json2->Response->trialsOfOsiris->allTime->deaths->pga->displayValue;"," $trialsAverageLifespan = $json2->Response->trialsOfOsiris->allTime->averageLifespan->basic->displayValue;"," $trialsWinLossRatio = $json2->Response->trialsOfOsiris->allTime->winLossRatio->basic->displayValue;"," $trialsLongestKillSpree = $json2->Response->trialsOfOsiris->allTime->longestKillSpree->basic->displayValue;"," "," "," "," // echo \"<p>Trials test: \", $getAccountSummary;"," echo \"<p>Trials Stats: <p>\", $trialsTotalKills, \" kills, Average per game: \", $trialsAverageKillsPerGame;"," echo \"<p>\";"," echo $trialsTotalDeaths, \" deaths, Average per game: \", $trialsAverageDeathsPerGame;"," echo \"<p>Average K/D: \", $trialsKDRatio;"],"id":11}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":4},"action":"insert","lines":["    "],"id":12}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":4},"action":"remove","lines":["    "],"id":13}],[{"start":{"row":2,"column":0},"end":{"row":2,"column":1},"action":"remove","lines":[" "],"id":14},{"start":{"row":3,"column":0},"end":{"row":3,"column":1},"action":"remove","lines":[" "]},{"start":{"row":4,"column":0},"end":{"row":4,"column":1},"action":"remove","lines":[" "]},{"start":{"row":5,"column":0},"end":{"row":5,"column":1},"action":"remove","lines":[" "]},{"start":{"row":6,"column":0},"end":{"row":6,"column":1},"action":"remove","lines":[" "]},{"start":{"row":7,"column":0},"end":{"row":7,"column":1},"action":"remove","lines":[" "]}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":4},"action":"insert","lines":["    "],"id":15},{"start":{"row":2,"column":0},"end":{"row":2,"column":4},"action":"insert","lines":["    "]},{"start":{"row":3,"column":0},"end":{"row":3,"column":4},"action":"insert","lines":["    "]},{"start":{"row":4,"column":0},"end":{"row":4,"column":4},"action":"insert","lines":["    "]},{"start":{"row":5,"column":0},"end":{"row":5,"column":4},"action":"insert","lines":["    "]},{"start":{"row":6,"column":0},"end":{"row":6,"column":4},"action":"insert","lines":["    "]},{"start":{"row":7,"column":0},"end":{"row":7,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":2,"column":3},"end":{"row":4,"column":28},"action":"remove","lines":[" $tim = \"tanky_tim12\";","    $wheels = \"wheels00769\";","    $cosmic = \"cosmicrichy\";"],"id":16}],[{"start":{"row":7,"column":1},"end":{"row":7,"column":4},"action":"insert","lines":["   "],"id":17}],[{"start":{"row":9,"column":0},"end":{"row":9,"column":4},"action":"insert","lines":["    "],"id":18},{"start":{"row":10,"column":0},"end":{"row":10,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":12,"column":0},"end":{"row":12,"column":4},"action":"insert","lines":["    "],"id":19},{"start":{"row":13,"column":0},"end":{"row":13,"column":4},"action":"insert","lines":["    "]},{"start":{"row":14,"column":0},"end":{"row":14,"column":4},"action":"insert","lines":["    "]},{"start":{"row":15,"column":0},"end":{"row":15,"column":4},"action":"insert","lines":["    "]},{"start":{"row":16,"column":0},"end":{"row":16,"column":4},"action":"insert","lines":["    "]},{"start":{"row":17,"column":0},"end":{"row":17,"column":4},"action":"insert","lines":["    "]},{"start":{"row":18,"column":0},"end":{"row":18,"column":4},"action":"insert","lines":["    "]},{"start":{"row":19,"column":0},"end":{"row":19,"column":4},"action":"insert","lines":["    "]},{"start":{"row":20,"column":0},"end":{"row":20,"column":4},"action":"insert","lines":["    "]},{"start":{"row":21,"column":0},"end":{"row":21,"column":4},"action":"insert","lines":["    "]},{"start":{"row":22,"column":0},"end":{"row":22,"column":4},"action":"insert","lines":["    "]},{"start":{"row":23,"column":0},"end":{"row":23,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":24,"column":1},"end":{"row":31,"column":0},"action":"remove","lines":["","// $membershipID = 4611686018439307322;"," ","//  curl_setopt($ch, CURLOPT_URL, 'https://www.bungie.net/platform/Destiny/Manifest/InventoryItem/1274330687/');","","//get memberships (test)>","// /SearchDestinyPlayer/{membershipType}/{displayName}/",""],"id":20}],[{"start":{"row":27,"column":1},"end":{"row":28,"column":1},"action":"remove","lines":["//curl_setopt($getMembershipId, CURLOPT_URL, 'https://www.bungie.net/Platform/Destiny/2/Stats/GetMembershipIdByDisplayName/'.$wheels.'/');"," "],"id":21}],[{"start":{"row":38,"column":1},"end":{"row":40,"column":45},"action":"remove","lines":["echo \"case insensitive test: \", $getMembershipResults;"," "," echo \"First membership ID: \", $membershipID;"],"id":22}],[{"start":{"row":38,"column":0},"end":{"row":38,"column":1},"action":"remove","lines":[" "],"id":23}],[{"start":{"row":37,"column":66},"end":{"row":38,"column":0},"action":"remove","lines":["",""],"id":24}],[{"start":{"row":37,"column":65},"end":{"row":37,"column":66},"action":"remove","lines":[";"],"id":25}],[{"start":{"row":55,"column":0},"end":{"row":55,"column":3},"action":"insert","lines":["// "],"id":26},{"start":{"row":56,"column":0},"end":{"row":56,"column":3},"action":"insert","lines":["// "]},{"start":{"row":57,"column":0},"end":{"row":57,"column":3},"action":"insert","lines":["// "]},{"start":{"row":58,"column":0},"end":{"row":58,"column":3},"action":"insert","lines":["// "]},{"start":{"row":59,"column":0},"end":{"row":59,"column":3},"action":"insert","lines":["// "]},{"start":{"row":60,"column":0},"end":{"row":60,"column":3},"action":"insert","lines":["// "]}],[{"start":{"row":62,"column":1},"end":{"row":62,"column":40},"action":"remove","lines":["// $urlMissing2 = \"https://bungie.net\";"],"id":27}],[{"start":{"row":62,"column":0},"end":{"row":62,"column":1},"action":"remove","lines":[" "],"id":28}],[{"start":{"row":61,"column":35},"end":{"row":62,"column":0},"action":"remove","lines":["",""],"id":29}],[{"start":{"row":66,"column":1},"end":{"row":67,"column":50},"action":"remove","lines":["// echo \"<p>emblem: \", $emblemPath;"," // echo \"<p>background: \", $emblemBackgroundPath;"],"id":30}],[{"start":{"row":66,"column":0},"end":{"row":66,"column":1},"action":"remove","lines":[" "],"id":31}],[{"start":{"row":65,"column":1},"end":{"row":66,"column":0},"action":"remove","lines":["",""],"id":32}],[{"start":{"row":65,"column":0},"end":{"row":65,"column":1},"action":"remove","lines":[" "],"id":33}],[{"start":{"row":64,"column":95},"end":{"row":65,"column":0},"action":"remove","lines":["",""],"id":34}],[{"start":{"row":69,"column":0},"end":{"row":77,"column":1},"action":"remove","lines":[" // echo \"<p>emblem: \", $completeEmblemIcon;"," // echo \"<p>background: \", $completeEmblemBackground;"," "," // $grimoire = $json->Response->data->characters[$hunter]->characterBase->grimoireScore;"," "," // echo \"Hunter Emblem Icon Link: \", $completeEmblemIcon;"," // echo \"<p> Emblem Background Path: \", $completeEmblemBackground;"," // echo \"<p> Hunter Grimoire is: \", $grimoire;"," "],"id":35}],[{"start":{"row":68,"column":1},"end":{"row":69,"column":0},"action":"remove","lines":["",""],"id":36}],[{"start":{"row":68,"column":0},"end":{"row":68,"column":1},"action":"remove","lines":[" "],"id":37}],[{"start":{"row":67,"column":63},"end":{"row":68,"column":0},"action":"remove","lines":["",""],"id":38}],[{"start":{"row":72,"column":0},"end":{"row":77,"column":1},"action":"remove","lines":[" // curl_setopt($accountSummary, CURLOPT_URL, 'https://www.bungie.net/Platform/Destiny/2/Account/'.$membershipID.'/Summary/');"," // curl_setopt($accountSummary, CURLOPT_URL, 'https://www.bungie.net/Platform/Destiny/Stats/ActivityHistory/2/'.$membershipID.'/'.$characterId.'/?mode=TrialsOfOsiris');"," // curl_setopt($accountSummary, CURLOPT_URL, 'https://www.bungie.net/Platform/Destiny/Stats/AggregateActivityStats/2/'.$membershipID.'/'.$characterId.'/?defintions=true');"," // curl_setopt($accountSummary, CURLOPT_URL, 'https://www.bungie.net/Platform/Destiny/Stats/Definition/');"," // curl_setopt($accountSummary, CURLOPT_URL, 'https://www.bungie.net/Platform/Destiny/2/Account/'.$membershipID.'/Triumphs/');"," "],"id":39}],[{"start":{"row":75,"column":0},"end":{"row":82,"column":111},"action":"remove","lines":["","","","","",""," // curl_setopt($accountSummary, CURLOPT_URL, 'https://www.bungie.net/Platform/Destiny/Stats/AggregateActivityStats/2/'.$membershipID.'/'.$characterId.'/');"," // www.bungie.net/Platform/Destiny/Stats/ActivityHistory/{membershipType}/{destinyMembershipId}/{characterId}/"],"id":40}],[{"start":{"row":74,"column":151},"end":{"row":75,"column":0},"action":"remove","lines":["",""],"id":41}],[{"start":{"row":0,"column":5},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":42}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":1,"column":0},"end":{"row":1,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":122,"mode":"ace/mode/php"}},"timestamp":1492671990095,"hash":"a5ea6eea3de2fd81c6f1f8e9fe5b0048faf00d3b"}